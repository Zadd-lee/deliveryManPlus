# 🚀 Delivery Man Plus

**Delivery Man Plus**는 기존의 배달앱 프로젝트 [Delivery Man](https://github.com/golden-teeth/delivery-man)을 고도화한 버전입니다.  
기능 개선뿐 아니라 인증, 설계 구조, 사용자 경험 측면에서도 보다 실제 서비스에 가까운 형태로 발전시키는 것을 목표로 삼았습니다.  
자세한 설계 배경과 고민은 👉 [Notion 문서](https://chambray-gallimimus-266.notion.site/15b18bbcc35e8073abccceef55ad4d73?pvs=4)에서 확인하실 수 있습니다.

---

## 📌 기술 스택

| 구분 | 사용 기술 |
|------|------------|
| **백엔드** | Java 17, Spring Boot 3.4.0, JPA |
| **보안** | Spring Security, JWT (Access/Refresh Token) |
| **데이터베이스** | MySQL |
| **테스트** | JUnit5, Mockito, Spring Test, Spring Security Test |
| **API 문서화** | Swagger |

---

## 🛠️ 버전별 기능 요약

### 🔹 V0: 기본 기능 구현
- 회원 가입 / 로그인  
  session 방식으로 적용
- 가게 및 메뉴 등록 & 조회
- 단일 메뉴 주문 기능

### 🔸 V1: 기능 고도화 및 사용자 경험 개선
- **보안 강화**  
  Spring Security와 JWT 인증 도입으로 보안 구조 개선

- **가게 카테고라이징**  
    가게 카테고리 추가 및 검색 기능

- **메뉴 옵션 기능**  
  1차, 2차 옵션 구조 도입  
  필수/선택 옵션 구분 및 최소 선택 수 지정 가능  
  옵션 다중 선택 기능    
  메뉴 옵션 가격 추가 및 주문 시 반영  

- **주문 시스템 확장**  
  다중 메뉴 주문 가능  
  옵션에 따른 가격 변동 기능 포함  
  쿠폰 자동 적용 기능 추가

- **조회 고도화**  
- 페이징 처리, 정렬 기능 추가
- 검색 기능 추가  
  가게명, 메뉴명, 카테고리로 검색 가능

- **리뷰 기능**  
  가게/메뉴에 대한 평가 및 후기 작성 가능

- **장바구니 기능**  
  주문 전 임시 저장 및 수정 가능

- **이미지 업로드 기능**  
  메뉴 및 가게에 이미지 추가 가능

---

## 🧩 프로젝트 구조 및 설계

도메인 중심으로 패키지를 나누어 유지보수성과 확장성을 고려했습니다.  
주요 도메인: 회원, 가게, 메뉴, 주문, 쿠폰, 리뷰, 장바구니, 인증

- ERD 및 API 명세는 👉 [Notion 문서 참고](https://chambray-gallimimus-266.notion.site/15b18bbcc35e8073abccceef55ad4d73?pvs=4)

---

## 🧠 설계 과정에서의 고민
- **쿠폰 설계**  
  수량 제한 쿠폰, 기간 제한 쿠폰을 구분하고  
  정액/정률 할인 방식으로 유연한 정책 적용 가능하게 설계

- **탈퇴 회원 처리**  
  재가입은 탈퇴 후 3개월 이후만 가능하도록 제한  
  개인정보 보호를 위한 데이터 보존 기간 설정 (예: 주문정보 5년, 로그인 기록 1년 등)
- **카테고리의 깊이**  
  카테고리가 1차 카테고리 밖에 없는 단순 구조
- **옵션의 복잡성**  
  옵션의 복잡성을 최소화하고 사용자 경험을 고려해 최대 2차 옵션까지만 허용
---

## 🛠 트러블슈팅 & 리팩터링

- **세션 기반 인증의 한계**  
  서버 부하 및 RESTful 구조 위반 문제로 인해 JWT + Redis 기반 구조로 개선

- **검증 로직 중복 문제**  
  사용자-엔티티 관계 검증 로직을 각 계층에서 반복 사용 →  
  이를 `Validator` 유틸 클래스로 분리해 중복 제거

- **도메인의 단순함**  
  V0에서는 단건 주문만 가능하고 옵션도 없었음  
  → 다건 주문, 옵션 가격 계산 등 실제 배달앱과 유사한 기능으로 확장

- **쿠폰 동시 발급 문제**  
  선착순 쿠폰의 경우 Race Condition 가능성이 있어  
  → 비관적 락 적용, 향후 Redis + Lua 스크립트 방식 고려

- **장바구니 저장 방식**  
  비회원도 사용할 수 있고 휘발성이 강한 데이터임에도 DB에 저장  
  → Redis 캐시 기반 저장 방식으로의 전환 검토 중

---

## 📈 회고와 앞으로의 계획

이번 프로젝트를 통해 **서비스의 실제 사용성과 구조적인 설계**의 중요성을 깊이 있게 느꼈습니다.  
기능이 많다고 좋은 게 아니라, **도메인에 맞는 구조와 설계의 깊이**가 사용자 경험에 큰 영향을 준다는 점을 실감했습니다.

### 💡 다음 단계 계획
- Redis 기반 캐시 저장 도입 (장바구니, Refresh Token 등)
- 쿠폰 처리 성능 개선 (Lua 스크립트 적용 또는 메시지 큐 도입)
- 로그 수집, 모니터링 시스템 구성 (Spring Actuator, ELK 등)

---

## 🔗 주요 링크

- 📝 [프로젝트 Notion 문서](https://chambray-gallimimus-266.notion.site/15b18bbcc35e8073abccceef55ad4d73?pvs=4)
- 📁 [V0 원본 프로젝트 - Delivery Man](https://github.com/golden-teeth/delivery-man)
